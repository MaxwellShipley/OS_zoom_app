<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>OriginStory ‚Äì In-Meeting Auth</title>

<style>
  :root{
    /* Brand & surfaces */
    --brand-1: #6a7dff;
    --brand-2: #9c6bff;
    --ok: #12b886;
    --text: #0f172a;
    --muted: #475569;
    --glass: rgba(255,255,255,0.66);
    --glass-border: rgba(255,255,255,0.30);
    --ring: rgba(106,125,255,0.35);
    --shadow: 0 8px 30px rgba(2, 6, 23, 0.16);

    --bg-grad-1: radial-gradient(1200px 700px at -10% -10%, #e5e7ff 0%, transparent 60%);
    --bg-grad-2: radial-gradient(1200px 700px at 110% 110%, #ffe6ff 0%, transparent 60%);
    --bg-grad-3: linear-gradient(135deg, #e8efff 0%, #f6f0ff 100%);
  }
  /* Dark theme tokens (toggled via .dark on html) */
  html.dark{
    --text: #e5e7eb;
    --muted: #b6c2e0;
    --glass: rgba(17,23,41,0.66);
    --glass-border: rgba(255,255,255,0.12);
    --ring: rgba(127,162,255,0.35);
    --shadow: 0 10px 30px rgba(0, 0, 0, 0.45);

    --bg-grad-1: radial-gradient(1200px 700px at -10% -10%, #13203e 0%, transparent 60%);
    --bg-grad-2: radial-gradient(1200px 700px at 110% 110%, #2b183d 0%, transparent 60%);
    --bg-grad-3: linear-gradient(135deg, #0e1728 0%, #171530 100%);
  }

  /* Background */
  html, body { height: 100%; }
  body{
    margin:0; color:var(--text);
    background: var(--bg-grad-1), var(--bg-grad-2), var(--bg-grad-3);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
  }

  .container{ max-width: 960px; padding: 28px; margin: 0 auto; }

  /* Topbar */
  .topbar{ display:flex; align-items:center; justify-content:space-between; margin: 2px 0 12px 0; }
  .brand{ display:flex; align-items:center; gap:10px; }
  .brand-badge-rect{
    display: flex;
    align-items: center;
    justify-content: center;
    height: 36px;
    padding: 0 18px;
    border-radius: 12px;
    background: linear-gradient(135deg, var(--brand-1), var(--brand-2));
    box-shadow: var(--shadow);
    font-weight: 800;
    font-size: 16px;
    color: white;
    letter-spacing: .3px;
    line-height: 1;
  }



  .actions{ display:flex; align-items:center; gap:6px; }
  .btn-toggle{
    padding: 8px 12px; border-radius: 999px; cursor:pointer;
    border: 1px solid var(--glass-border);
    background: var(--glass);
    color: var(--text);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    box-shadow: var(--shadow);
    font-size: 13px;
  }

  /* Glass base */
  .glass{
    background: var(--glass);
    border: 1px solid var(--glass-border);
    border-radius: 16px;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: var(--shadow);
  }

  /* Login card */
  .login{ max-width: 540px; margin: 28px auto; padding: 24px; }
  .login h2{ margin:0 0 8px 0; font-size:22px; }
  .login p{ margin:0 0 16px 0; color: var(--muted); }

  .field{ display:flex; flex-direction:column; gap:6px; margin: 10px 0 14px 0; }
  .label{ font-size:13px; color: var(--muted); }
  .input{
    padding: 12px; border-radius: 12px; outline:none;
    border: 1px solid var(--glass-border); background: rgba(255,255,255,0.75);
    transition: box-shadow .15s ease, border-color .15s ease, background .15s ease;
  }
  html.dark .input{ background: rgba(15,23,42,0.66); }
  .input:focus{ border-color: var(--brand-1); box-shadow: 0 0 0 4px var(--ring); }

  .row{ display:flex; align-items:center; gap:10px; }
  .btn{
    border: none; cursor: pointer; padding: 12px 16px; border-radius: 12px;
    font-weight: 700; letter-spacing: .2px; color:white;
    background: linear-gradient(135deg, var(--brand-1), var(--brand-2));
    box-shadow: var(--shadow);
  }
  .status{
    font-size: 12px;
    padding: 4px 10px;
    border-radius: 999px;
    font-weight: 600;
    letter-spacing: .2px;
    border: 1px solid var(--glass-border);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  .status--connected{
    color: #0b6e4f;
    background: rgba(18,184,134,.12);
    border-color: rgba(18,184,134,.25);
  }
  .status--disconnected{
    color: #b91c1c;
    background: rgba(239,68,68,.12);
    border-color: rgba(239,68,68,.25);
  }
  html.dark .status--connected{
    color: #19d6a2;
    background: rgba(25,214,162,.12);
    border-color: rgba(25,214,162,.3);
  }
  html.dark .status--disconnected{
    color: #fda4a4;
    background: rgba(239,68,68,.14);
    border-color: rgba(239,68,68,.28);
  }


  /* Panels */
  .panel{ padding: 20px; }
  .panel-header{ display:flex; justify-content:space-between; align-items:center; margin-bottom: 10px; }
  .panel-title{ font-size: 14px; font-weight: 800; }
  .meta{ font-size: 12px; color: var(--muted); }

  .list{ display:flex; flex-direction:column; gap:10px; }
  .row-item{
    display:flex; align-items:center; justify-content:space-between;
    padding: 14px 16px; border-radius: 14px;
    border: 1px solid var(--glass-border);
    background: rgba(255,255,255,0.72);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    transition: transform .1s ease, box-shadow .2s ease;
  }
  html.dark .row-item{ background: rgba(17,23,41,0.66); }
  .row-item:hover{ transform: translateY(-1px); box-shadow: var(--shadow); }

  .user{ display:flex; align-items:center; gap:10px; }
  .name{ font-weight:700; }
  .you{
    font-size: 12px; color: #0b6e4f; background: rgba(18,184,134,.12);
    border: 1px solid rgba(18,184,134,.25);
    padding: 2px 8px; border-radius: 999px;
  }
  html.dark .you{ color:#19d6a2; background: rgba(25,214,162,.12); border-color: rgba(25,214,162,.3); }

  .userid{
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
    font-size: 12px; color: var(--muted);
    padding: 3px 8px; border-radius: 999px; border: 1px dashed var(--glass-border);
  }

  /* Pill base ‚Äî two-layer background to avoid gradient/border seam lines */
.prob{
  --prob-start: #60a5fa;               /* default (overridden per tier) */
  --prob-end-overlay: rgba(255,255,255,.92);

  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 70px;
  height: 34px;
  padding: 0 12px;
  border-radius: 9999px;

  /* Transparent border + border-box layer prevents the ‚Äúhairline‚Äù artifact */
  border: 1px solid transparent;
  background:
    linear-gradient(135deg, var(--prob-start), var(--prob-end-overlay)) padding-box,
    linear-gradient(135deg, rgba(255,255,255,0.7), rgba(255,255,255,0.7)) border-box;
  background-clip: padding-box, border-box;
  box-shadow: none;                     /* remove inset to prevent ring lines */

  font-weight: 800;
  letter-spacing: .3px;
  line-height: 1;
  box-sizing: border-box;
  text-align: right;
}
html.dark .prob{
  /* Dark mode: stick to a solid fill to avoid any residual banding */
  background: rgba(17,23,41,.66);
  border: 1px solid var(--glass-border);
  background-clip: border-box;
}
.prob > span{ display:inline-block; line-height:1; }




  /* Probability color mapping */
  /* More vibrant green/blue/red */
  /* Vibrant tiers via CSS variable; avoid seams by using the two-layer background above */
  .prob[data-v="high"]{
    --prob-start: #34d399;   /* green */
    color:#065f46;
  }
  .prob[data-v="med"]{
    --prob-start: #60a5fa;   /* blue */
    color:#1e3a8a;
  }
  .prob[data-v="low"]{
    --prob-start: #f87171;   /* red */
    color:#7f1d1d;
  }

  /* Dark mode text colors for readability */
  html.dark .prob[data-v="high"]{ color:#86efac; }
  html.dark .prob[data-v="med"]{ color:#93c5fd; }
  html.dark .prob[data-v="low"]{ color:#fca5a5; }

  /* Make login inputs text white in dark mode */
  html.dark input[type="text"],
  html.dark input[type="password"] {
    color: #fff;
  }

  html.dark input[type="text"],
  html.dark input[type="password"],
  html.dark input[type="email"] { color: #fff; }
  html.dark input::placeholder { color: rgba(255,255,255,0.65); }

  #emoji-toggle-btn:hover { filter: brightness(1.05); }
  #emoji-toggle-btn:active { transform: translateY(1px); }
  #emoji-toggle-btn:focus { outline: 2px solid rgba(124,58,237,.4); outline-offset: 2px; }


  /* States */
  .loading{ text-align:center; padding:20px; color:var(--muted); }
  .error{
    background: rgba(255, 0, 0, 0.08);
    color: #a61b1b; padding: 15px; border: 1px solid rgba(255,0,0,.25);
    border-radius: 10px; margin: 10px 0;
  }
</style>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div class="brand-badge-rect">OriginStory</div>
      <div class="actions">
        <button id="themeToggle" class="btn-toggle" type="button">üåô Dark</button>
      </div>
    </div>

    <!-- App root where JS renders Login or Participants -->
    <div id="participant-list">
      <div class="loading">
        <h2>Loading Zoom SDK‚Ä¶</h2>
        <p>Please wait while we initialize the app.</p>
      </div>
    </div>
  </div>

  <!-- Socket.IO, Zoom SDK, and your app -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://appssdk.zoom.us/sdk.min.js"></script>
  <script src="index.js"></script>

  <script>
    // Simple theme toggle (persist per session)
    const btn = document.getElementById('themeToggle');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    const saved = sessionStorage.getItem('os-theme');
    if ((saved === 'dark') || (!saved && prefersDark)) {
      document.documentElement.classList.add('dark');
      btn.textContent = '‚òÄÔ∏è Light';
    }
    btn.addEventListener('click', () => {
      const isDark = document.documentElement.classList.toggle('dark');
      btn.textContent = isDark ? '‚òÄÔ∏è Light' : 'üåô Dark';
      sessionStorage.setItem('os-theme', isDark ? 'dark' : 'light');
    });
  </script>
</body>
</html>
